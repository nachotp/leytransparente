{% extends 'base.html' %}
{% load static %}
{% block head_end %}
  <link rel="stylesheet" href="{% static 'lib/DataTables/dataTables.bootstrap4.min.css' %}">
  <script type="text/javascript" charset="utf8" src="{% static 'lib/DataTables/jquery-3.3.1.min.js' %}"></script>
  <script type="text/javascript" charset="utf8" src="{% static 'lib/DataTables/jquery.dataTables.min.js' %}"></script>
  <script type="text/javascript" charset="utf8" src="{% static 'lib/DataTables/dataTables.bootstrap4.min.js' %}"></script>
  <script type="text/javascript" charset="utf8" src="{% static 'lib/DataTables/Spanish.js' %}"></script>
{% endblock %}

{% block content %}
<b-row :class="toControl">
    <b-col>
        <h2>Usuarios Existentes</h2>
    </b-col>
</b-row>
    <div class="container" style="max-width: 1450px">
        <table  class="table table-striped table-bordered compact" id="dip_table" cellspacing="0">
            <thead>
                <tr>
                    <td>Nombre Usuario</td>
                    <td>Nombre</td>
                    <td>Apellido</td>
                    <td>Correo</td>
                    <td></td>
                </tr>
            </thead>
            <tbody>
                {% if usuarios %}
                {% for usuario in usuarios %}
                    {% ifnotequal usuario.username 'leytransparente' %}
                        <tr>
                            <td>{{ usuario.username }}</td>
                            <td>{{ usuario.nombre|title }}</td>
                            <td>{{ usuario.apellido|title }}</td>
                            <td>{{ usuario.email}}</td>
                            <td class="align-middle">
                                <div class="text-center">
                                    <a class="" href="{% url 'Actualizar Usuario' id=usuario.username %}"><b-button variant="primary">Actualizar</b-button></a>
                                    <b-form method="GET" action="{% url 'Eliminar Usuario' id=usuario.username %}" v-if="show">
                                        <b-button type = "submit" variant="danger">Eliminar</b-button>
                                    </b-form>
                                </div>
                            </td>
                        </tr>
                    {% endifnotequal %}
                {% endfor %}

                {% else %}
                <h1>No hay registros de Usuarios</h1>
                {% endif %}
            </tbody>
        </table>
    </div>
{% endblock%}

{% block body_end %}
<script>

$(document).ready(function() {
    var table = "#dip_table";
    console.log('creating table '+table);

    var diputable = $(table).DataTable({
        "language": langSpanish,
        orderCellsTop: true,
        "order": [[ 0, "desc" ]],
        "paging":         true,

    });
});
</script>
{% endblock %}